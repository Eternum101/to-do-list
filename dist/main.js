(()=>{"use strict";const e=document.querySelector("[data-projects]"),t=document.querySelector("[data-new-project-form]"),n=document.querySelector("[data-new-project-input]"),a=document.querySelector("[data-delete-list-button]"),l=document.querySelector("[data-list-display-container]"),o=document.querySelector("[data-list-title]"),c=document.querySelector("[data-list-count]"),d=document.querySelector("[data-tasks]"),i=document.getElementById("task-template"),s=document.querySelector("[data-new-task-form]"),r=document.querySelector("[data-new-task-input]"),u=document.querySelector("[data-clear-complete-button]"),m=document.querySelector("[data-all-tasks-button]");(()=>{const p="task.lists",f="task.selectedListID";let y=JSON.parse(localStorage.getItem(p))||[],S=localStorage.getItem(f);function k(e,t){t.addEventListener("input",(function(t){const n=t.target.value;e.dueDate=n,v()}))}function v(){g(),h()}function g(){localStorage.setItem(p,JSON.stringify(y)),localStorage.setItem(f,S)}function h(){E(e),y.forEach((t=>{const n=document.createElement("li");n.dataset.listId=t.id,n.classList.add("list-name");const a=document.createElement("span");a.setAttribute("class","material-symbols-outlined list"),a.innerText="playlist_add",n.appendChild(a),n.appendChild(document.createTextNode(t.name)),t.id===S&&n.classList.add("active-list"),e.appendChild(n)}));const t=y.find((e=>e.id===S));null==S?l.style.display="none":(l.style.display="",o.innerText=t.name,q(t),E(d),function(e){e.tasks.forEach((e=>{const t=document.importNode(i.content,!0),n=t.querySelector("input");n.id=e.id,n.checked=e.complete;const a=t.querySelector("label");a.htmlFor=e.id,a.append(e.name);const l=t.querySelector(".input-due-date");l.value=e.dueDate,k(e,l),d.appendChild(t)}))}(t))}function q(e){const t=e.tasks.filter((e=>!e.complete)).length,n=1===t?"Task":"Tasks";c.innerText=`${t} ${n} Remaining`}function E(e){for(;e.firstChild;)e.removeChild(e.firstChild)}e.addEventListener("click",(e=>{"li"===e.target.tagName.toLowerCase()&&(S=e.target.dataset.listId,v())})),d.addEventListener("click",(e=>{if("input"===e.target.tagName.toLowerCase()){const t=y.find((e=>e.id===S));t.tasks.find((t=>t.id===e.target.id)).complete=e.target.checked,g(),q(t)}})),u.addEventListener("click",(e=>{const t=y.find((e=>e.id===S));t.tasks=t.tasks.filter((e=>!e.complete)),v()})),a.addEventListener("click",(e=>{y=y.filter((e=>e.id!==S)),S=null,v()})),t.addEventListener("submit",(e=>{e.preventDefault();const t=n.value;if(null==t||""===t)return;const a=(l=t,{id:Date.now().toString(),name:l,tasks:[]});var l;n.value=null,y.push(a),v()})),s.addEventListener("submit",(e=>{e.preventDefault();const t=r.value;if(null==t||""===t)return;const n=(a=t,{id:Date.now().toString(),name:a,complete:!1,dueDate:null});var a;r.value=null,y.find((e=>e.id===S)).tasks.push(n),v()})),m.addEventListener("click",(function(){E(d),y.forEach((e=>{e.tasks.forEach((e=>{const t=document.importNode(i.content,!0),n=t.querySelector("input");n.id=e.id,n.checked=e.complete;const a=t.querySelector("label");a.htmlFor=e.id,a.append(e.name);const l=t.querySelector(".input-due-date");l.value=e.dueDate,k(e,l),d.appendChild(t)}))}));const t=e.querySelector(".active-list");t&&t.classList.remove("active-list"),S=null,o.innerText="All Tasks",c.innerText="",l.style.display=""})),h()})()})();