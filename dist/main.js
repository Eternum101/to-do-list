(()=>{"use strict";(()=>{const t=document.querySelector("[data-projects]"),e=document.querySelector("[data-new-project-form"),n=document.querySelector("[data-new-project-input"),a=document.querySelector("[data-delete-list-button]"),l=document.querySelector("[data-list-display-container]"),i=document.querySelector("[data-list-title]"),d=document.querySelector("[data-list-count]"),o=document.querySelector("[data-tasks]"),s=document.getElementById("task-template"),c=document.querySelector("[data-new-task-form]"),r=document.querySelector("[data-new-task-input]"),u=document.querySelector("[data-clear-complete-button]"),m="task.lists",p="task.selectedListID";let f=JSON.parse(localStorage.getItem(m))||[],y=localStorage.getItem(p);function k(){S(),g()}function S(){localStorage.setItem(m,JSON.stringify(f)),localStorage.setItem(p,y)}function g(){h(t),f.forEach((e=>{const n=document.createElement("li");n.dataset.listId=e.id,n.classList.add("list-name");const a=document.createElement("span");a.setAttribute("class","material-symbols-outlined list"),a.innerText="playlist_add",n.appendChild(a),n.appendChild(document.createTextNode(e.name)),e.id===y&&n.classList.add("active-list"),t.appendChild(n)}));const e=f.find((t=>t.id===y));null==y?l.style.display="none":(l.style.display="",i.innerText=e.name,v(e),h(o),function(t){t.tasks.forEach((t=>{const e=document.importNode(s.content,!0),n=e.querySelector("input");n.id=t.id,n.checked=t.complete;const a=e.querySelector("label");a.htmlFor=t.id,a.append(t.name),o.appendChild(e)}))}(e))}function v(t){const e=t.tasks.filter((t=>!t.complete)).length,n=1===e?"Task":"Tasks";d.innerText=`${e} ${n} Remaining`}function h(t){for(;t.firstChild;)t.removeChild(t.firstChild)}t.addEventListener("click",(t=>{"li"===t.target.tagName.toLowerCase()&&(y=t.target.dataset.listId,k())})),o.addEventListener("click",(t=>{if("input"===t.target.tagName.toLowerCase()){const e=f.find((t=>t.id===y));e.tasks.find((e=>e.id===t.target.id)).complete=t.target.checked,S(),v(e)}})),u.addEventListener("click",(t=>{const e=f.find((t=>t.id===y));e.tasks=e.tasks.filter((t=>!t.complete)),k()})),a.addEventListener("click",(t=>{f=f.filter((t=>t.id!==y)),y=null,k()})),e.addEventListener("submit",(t=>{t.preventDefault();const e=n.value;if(null==e||""===e)return;const a=(l=e,{id:Date.now().toString(),name:l,tasks:[]});var l;n.value=null,f.push(a),k()})),c.addEventListener("submit",(t=>{t.preventDefault();const e=r.value;if(null==e||""===e)return;const n=(a=e,{id:Date.now().toString(),name:a,complete:!1});var a;r.value=null,f.find((t=>t.id===y)).tasks.push(n),k()})),g()})()})();